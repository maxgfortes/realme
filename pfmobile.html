<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RealMe</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="./src/styles/mobile-profile.css">
  <link rel="stylesheet" href="./src/styles/root.css" />
  <link rel="icon" href="./src/icon/icon.png" type="image/png" />
  <link rel="manifest" href="/manifest.json" />
  <!-- Para o notch/barra de status -->
  <meta name="theme-color" content="#020202">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="screen-orientation" content="portrait">
  <meta name="x5-orientation" content="portrait">

    <!-- Social preview -->
  <meta property="og:title" content="RealMe">
  <meta property="og:description" content="Entre no RealMe ainda hoje e seja você mesmo!">
  <meta property="og:url" content="https://maxgfortes.github.io/realme/PF.html">
  <meta property="og:image" content="https://maxgfortes.github.io/realme/src/icon/share_icon.png">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="https://i.postimg.cc/7PfNb8TT/share-icon.png">

</head>
<body>

  <div id="settings-sidebar" class="sidebar">
    <div class="sidebar-header">
        <button id="close-sidebar-btn" class="close-btn">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 298 511.93">
  <path d="M285.77 441c16.24 16.17 16.32 42.46.15 58.7-16.16 16.24-42.45 16.32-58.69.16l-215-214.47c-16.24-16.16-16.32-42.45-.15-58.69L227.23 12.08c16.24-16.17 42.53-16.09 58.69.15 16.17 16.24 16.09 42.54-.15 58.7l-185.5 185.04L285.77 441z"/>
</svg>
        </button>
        <h2>Configurações</h2>
    </div>
    <div class="settings-list">
        <div class="section-config">
          <a href="#" class="setting-item"><i class="fas fa-user-circle"></i> Conta</a>
          <a href="#" class="setting-item"><i class="fas fa-lock"></i> Privacidade</a>
          <a href="#" class="setting-item"><i class="fas fa-bell"></i> Notificações</a>
        </div>
        <div class="section-config">
          <p>Perfil</p>
          <a href="#" class="setting-item"><i class="fa-solid fa-pen"></i> Edição Rapida</a>
          <a href="config.html" class="setting-item"><i class="fas fa-sliders-h"></i>Edição Completa</a>
        </div>
        <div class="section-config">
          <p>Outros</p>
          <a href="#" class="setting-item"><i class="fas fa-envelope"></i> Contato</a>
          <a href="termos.html" class="setting-item"><i class="fas fa-book"></i>Termos e uso</a>
        </div>
        <li><a href="#" class="setting-item"><i class="fas fa-question-circle"></i> Ajuda</a></li>
    </div>
    <div class="sidebar-footer">
        <button id="btnSair"><i class="fas fa-sign-out-alt"></i> Fazer Logout</button>
    </div>
</div>

  <!-- Navbar Top -->
  <nav class="navbar-top">
    <div class="top-left">
      <button onclick="window.history.back()">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 298 511.93">
  <path d="M285.77 441c16.24 16.17 16.32 42.46.15 58.7-16.16 16.24-42.45 16.32-58.69.16l-215-214.47c-16.24-16.16-16.32-42.45-.15-58.69L227.23 12.08c16.24-16.17 42.53-16.09 58.69.15 16.17 16.24 16.09 42.54-.15 58.7l-185.5 185.04L285.77 441z"/>
</svg>
      </button>
      <h2 id="headername">username</h2>
    </div>
    <div class="top-right">
      <a id="open-settings-btn">
        <?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 95.95" style="enable-background:new 0 0 122.88 95.95" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M8.94,0h105c4.92,0,8.94,4.02,8.94,8.94l0,0c0,4.92-4.02,8.94-8.94,8.94h-105C4.02,17.88,0,13.86,0,8.94l0,0 C0,4.02,4.02,0,8.94,0L8.94,0z M8.94,78.07h105c4.92,0,8.94,4.02,8.94,8.94l0,0c0,4.92-4.02,8.94-8.94,8.94h-105 C4.02,95.95,0,91.93,0,87.01l0,0C0,82.09,4.02,78.07,8.94,78.07L8.94,78.07z M8.94,39.03h105c4.92,0,8.94,4.02,8.94,8.94l0,0 c0,4.92-4.02,8.94-8.94,8.94h-105C4.02,56.91,0,52.89,0,47.97l0,0C0,43.06,4.02,39.03,8.94,39.03L8.94,39.03z"/></g></svg>
      </a>
    </div>
  </nav>

  <!-- Profile Container -->
  <div class="full-profile-container">
      <div class="profile-banner"></div>
    <div class="profile-header">
      <div class="full-header">
        <div class="pfp">
          <img src="./src/icon/default.jpg" alt="Foto de perfil" class="profile-pic" />
        </div>
        <div class="profile-info-block">
          <div class="name-line">
            <h2 class="profile-name" id="displayname">usuario do realme</h2>
            <span class="verificado"><i class="fas fa-check-circle"></i></span>
            <span class="tag01" data-profile-tag><i class="fas fa-check-circle"></i></span>
            <span class="tag02" data-profile-tag>Alt</span>
            <span class="tag03" data-profile-tag>Goth</span>
            <span class="tag04" data-profile-tag>2000s</span>
          </div>
          <div class="handle" id="username">@username</div>
          <div class="profile-stats">
            <div class="stats"><span><strong>0</strong> posts</span></div>
            <div class="stats"><span><strong>0</strong> seguidores</span></div>
            <div class="stats"><span><strong>0</strong> amigos</span></div>
            <div class="stats"><span><strong>0</strong> seguindo</span></div>
          </div>
        </div>
      </div>
      <div class="music">
        <button id="start" class="iframe-btn"><svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 512"><path fill-rule="nonzero" d="M255.99 0c70.68 0 134.7 28.66 181.02 74.98C483.33 121.3 512 185.31 512 256c0 70.68-28.67 134.69-74.99 181.01C390.69 483.33 326.67 512 255.99 512S121.3 483.33 74.98 437.01C28.66 390.69 0 326.68 0 256c0-70.67 28.66-134.7 74.98-181.02C121.3 28.66 185.31 0 255.99 0zm77.4 269.81c13.75-8.88 13.7-18.77 0-26.63l-110.27-76.77c-11.19-7.04-22.89-2.9-22.58 11.72l.44 154.47c.96 15.86 10.02 20.21 23.37 12.87l109.04-75.66zm79.35-170.56c-40.1-40.1-95.54-64.92-156.75-64.92-61.21 0-116.63 24.82-156.74 64.92-40.1 40.11-64.92 95.54-64.92 156.75 0 61.22 24.82 116.64 64.92 156.74 40.11 40.11 95.53 64.93 156.74 64.93 61.21 0 116.65-24.82 156.75-64.93 40.11-40.1 64.93-95.52 64.93-156.74 0-61.22-24.82-116.64-64.93-156.75z"/></svg> </button>
        <span id="musicTitle" style="margin-left:8px;font-weight:500;"></span>
      </div>
      <div class="action-buttons">
        <button class="btn-follow"><p>seguir</p></button>
        <button class="btn-message" id="btnMensagemPerfil">mensagem</button>
        <button class="btn-nudge"><p>nudge</p></button>
      </div>
    </div>
    <div class="activities">
      <div class="act-container">
        <div class="act-space">
          <div class="left-area">
            <img src="./src/icon/no-album-art.png">
          </div>
          <div class="right-area">
            <div class="meta-title">
              <p class="title-act">Title</p>
              <p class="sub-title-act">band</p>
            </div>
              <div class="meta-act">
                <div class="time-meta">
                  <p class="less">00:00</p>
                  <p class="more">00:00</p>
                </div>
                <div class="progress-bar">
                  <div class="progress"></div>
                </div>
              </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile Menu -->
    <div class="profile-menu-area">
      <div class="profile-menu">
        <button class="menu-item active"><i class="fa-solid fa-calendar-days"></i></button>
        <button class="menu-item"><i class="fa-solid fa-address-card"></i></button>
        <button class="menu-item"><i class="fas fa-heart"></i></button>
        <button class="menu-item"><i class="fa-solid fa-comment"></i></button>
        <button class="menu-item"><i class="fas fa-link"></i></button>
      </div>
    </div>
    <div class="menu-select">
      <div class="slider">
        <div class="slide"></div>
      </div>
    </div>

    <!-- Profile Body -->
    <div class="profile-body">
      <div class="tab mural-tab active">
        <div id="muralPosts" class="mural-masonry">
          
        </div>
      </div>
      <div class="tab visao-tab">
        <div class="about-box sobre-box" id="sobreBox">
          <div class="sobre-header">
            <h4>Sobre <span id="nomeUsuario">esse usuario</span></h4>
          </div>
          <div class="sobre-content">
          <div class="sobre-left">
            <div class="info-item">
              <div class="info-details">
                <span class="info-icon"><i class="fa-solid fa-id-card-clip"></i></span>
                <span class="info-label">Nome:</span>
                <span class="info-value" id="nomeRealUsuario">Não informada</span>
              </div>
            </div>
            <div class="info-item">
              <div class="info-details">
                <span class="info-icon"><i class="fas fa-user"></i></span>
                <span class="info-label">Gênero:</span>
                <span class="info-value" id="generoUsuario">Não informado</span>
              </div>
            </div>
            <div class="info-item">
              <div class="info-details">
                <span class="info-icon"><i class="fas fa-heart"></i></span>
                <span class="info-label">Estado Civil:</span>
                <span class="info-value" id="estadoCivilUsuario">Não informado</span>
              </div>
            </div>
          </div>
          <div class="sobre-right">
            <div class="info-item">
              <div class="info-details">
                <div class="info-info">
                  <div class="info-top">
                    <span class="info-icon"><i class="fas fa-map-marker-alt"></i></span>
                    <span class="info-label">Localização:</span>
                  </div>
                  <div class="info-bottom">
                    <span class="info-value" id="localizacaoUsuario">Não informada</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="info-item">
              <div class="info-details">
                <span class="info-icon"><i class="fa-solid fa-map-location-dot"></i></span>
                <span class="info-label">Area:</span>
                <span class="info-value" id="areaUsuario">Não informada</span>
              </div>
            </div>
            <div class="info-item">
              <div class="info-details">
                <span class="info-icon"><i class="fa-solid fa-cake-candles"></i></span>
                <span class="info-label">Idade:</span>
                <span class="info-value" id="idadeUsuario">Não informada</span>
              </div>
            </div>
          </div>
        </div>
        </div>
        <div class="about-container">
          <div class="about-box"><p class="about-title">Visão geral:</p><p>esta opção nao esta disponível no momento...</p></div>
          <div class="about-box"><p class="about-title">Tags:</p><p>esta opção nao esta disponível no momento...</p></div>
          <div class="about-box"><p class="about-title">Meu Estilo:</p><p>esta opção nao esta disponível no momento...</p></div>
          <div class="about-box"><p class="about-title">Minha personalidade:</p><p>esta opção nao esta disponível no momento...</p></div>
          <div class="about-box"><p class="about-title">Meus Sonhos e desejos:</p><p>esta opção nao esta disponível no momento...</p></div>
          <div class="about-box"><p class="about-title">Meus Medos:</p><p>esta opção nao esta disponível no momento...</p></div>
        </div>
      </div>
      <div class="tab gostos-tab">
        <div class="about-container">
          <div class="about-box"><p class="about-title">Músicas:</p><p>esta opção nao esta disponível no momento...</p></div>
          <div class="about-box"><p class="about-title">Filmes e Séries:</p><p>esta opção nao esta disponível no momento...</p></div>
          <div class="about-box"><p class="about-title">Livros:</p><p>esta opção nao esta disponível no momento...</p></div>
          <div class="about-box"><p class="about-title">Personagens:</p><p>esta opção nao esta disponível no momento...</p></div>
          <div class="about-box"><p class="about-title">Comidas e Bebidas:</p><p>esta opção nao esta disponível no momento...</p></div>
          <div class="about-box"><p class="about-title">Hobbies:</p><p>esta opção nao esta disponível no momento...</p></div>
          <div class="about-box"><p class="about-title">Jogos favoritos:</p><p>esta opção nao esta disponível no momento...</p></div>
          <div class="about-box"><p class="about-title">Outros gostos:</p><p>esta opção nao esta disponível no momento...</p></div>
        </div>
      </div>
      <div class="tab deps-tab">
        <div class="about-container"></div>
      </div>
      <div class="tab links-tab">
        <div class="about-container">
        </div>
      </div>
    </div>
  </div>

  <!-- Navbar Bottom -->
  <nav class="navbar-bottom">
    <div class="navbar-bottom-content">
      <a href="feed.html">
        <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 511 511.832"><path fill-rule="nonzero" d="M43.084 468.748h116.942V364.721c0-25.882 10.609-49.45 27.679-66.528l.082-.081c17.077-17.07 40.645-27.679 66.527-27.679 25.844 0 49.412 10.617 66.519 27.687l.082.081c17.092 17.151 27.686 40.697 27.686 66.52v104.027h119.315V253.009L255.846 51.151 43.084 253.768v214.98zm138.484 43.084H29.337c-8.09 0-15.428-3.3-20.732-8.605C3.3 497.923 0 490.585 0 482.495V244.611c.059-5.681 2.298-11.346 6.733-15.568L241.038 5.915c8.236-7.846 21.284-7.927 29.616 0l232.514 221.323c4.782 3.957 7.832 9.931 7.832 16.614v238.643c0 7.964-3.316 15.391-8.642 20.717-5.253 5.253-12.591 8.62-20.695 8.62H327.059c-11.891 0-21.542-9.651-21.542-21.542V364.721c0-14.109-5.739-26.913-14.978-36.145l-.081-.081c-9.231-9.238-22.036-14.978-36.144-14.978-14.087 0-26.913 5.762-36.189 15.015-9.253 9.276-15.014 22.102-15.014 36.189V490.29c0 11.891-9.652 21.542-21.543 21.542z"/></svg>
      </a>
      <a href="acharamigos.html">
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><path d="M384,448v-42.7c0-58.9-47.7-106.7-106.7-106.7H106.7C47.7,298.7,0,346.4,0,405.3V448c0,11.8,9.6,21.3,21.3,21.3c11.8,0,21.3-9.6,21.3-21.3v-42.7c0.1-35.3,28.7-63.9,64-64l170.7,0c35.3,0.1,63.9,28.7,64,64V448c0,11.8,9.6,21.3,21.3,21.3S384,459.8,384,448z"/><path d="M192,64v21.3c35.3,0.1,63.9,28.7,64,64c-0.1,35.3-28.7,63.9-64,64c-35.3-0.1-63.9-28.7-64-64c0.1-35.3,28.7-63.9,64-64V64V42.7c-58.9,0-106.7,47.7-106.7,106.7C85.3,208.3,133.1,256,192,256c58.9,0,106.7-47.7,106.7-106.7c0-58.9-47.7-106.7-106.7-106.7V64z"/><path d="M512,448v-42.7c0-48.6-32.9-91.1-80-103.2c-11.4-2.9-23,3.9-26,15.3c-2.9,11.4,3.9,23,15.3,26c28.2,7.3,48,32.8,48,61.9V448c0,11.8,9.6,21.3,21.3,21.3S512,459.8,512,448z"/><path d="M336,87.4c28.9,7.4,48.1,33.5,48.1,61.9c0,5.2-0.6,10.6-2,15.9c-5.8,22.6-23.5,40.3-46.1,46.1c-11.4,2.9-18.3,14.5-15.4,26c2.9,11.4,14.5,18.3,26,15.4c37.7-9.7,67.2-39.1,76.9-76.9c2.3-8.8,3.4-17.7,3.4-26.5c0-47.6-32-90.9-80.2-103.3c-11.4-2.9-23,4-26,15.4C317.7,72.9,324.6,84.5,336,87.4L336,87.4z"/></g></svg>
      </a>
      <a href="direct-mobile.html">
        <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 506 511.682"><path fill-rule="nonzero" d="M76.022 432.762c-14.224-17.624-28.477-36.009-40.468-55.504-13.738-22.329-24.838-46.442-30.326-73.172-14.057-68.387.935-136.064 36.561-190.148C77.414 59.833 133.687 19.322 202.118 5.235c68.394-14.071 136.056.928 190.14 36.547 54.105 35.632 94.638 91.912 108.71 160.35 7.003 34.067 6.445 67.452-.116 99.01-7.018 33.734-20.937 65.408-39.78 93.639-25.671 38.445-58.723 65.581-98.51 82.009-39.837 16.45-86.054 21.88-138.014 16.979l-9.714-.928c-19.966-1.928-27.528-2.653-33.487-1.094-4.343 1.181-9.932 3.69-18.842 7.677l-8.381 3.734c-20.756 9.229-36.009 10.44-47.878 6.14-15.499-5.618-22.503-17.566-25.765-33.023-1.624-7.706-2.139-15.739-2.675-24.221-.399-6.445-.841-13.231-1.784-19.292zm47.972-127.857l61.768-98.785c10.976-16.573 33.719-20.177 49.357-7.924l52.024 40.917c4.785 3.734 11.469 3.886 16.363.319l66.038-46.413c9.678-7.032 21.873 4.698 15.297 14.681l-62.355 97.785c-10.977 16.566-33.719 20.176-49.357 7.917l-52.024-40.918c-4.785-3.734-11.462-3.893-16.363-.319l-65.509 47.37c-9.671 7.032-21.872-4.64-15.239-14.63zM74.761 353.16c11.976 19.473 26.273 37.597 40.323 54.902a22.782 22.782 0 014.785 9.693c2.501 10.962 3.175 21.532 3.799 31.428.384 6.104.754 11.919 1.493 16.232 2.226-.775 5.633-2.16 10.462-4.299l8.177-3.596c11.23-5.031 18.284-8.192 25.679-10.164h.094c13.688-3.646 23.49-2.711 49.581-.188l9.716.928c44.484 4.197 83.43-.196 116.25-13.746 31.246-12.905 57.36-34.444 77.833-65.103 15.616-23.395 27.144-49.596 32.936-77.457 5.336-25.686 5.8-52.822.116-80.48-11.52-56.026-44.673-102.084-88.919-131.221-44.274-29.158-99.72-41.432-155.79-29.891-56.012 11.528-102.07 44.674-131.199 88.912-29.166 44.282-41.433 99.728-29.906 155.798 4.205 20.495 13.246 39.852 24.57 58.252z"/></svg>
      </a>
      <a href="explorar.html">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M225.38 233.37c-12.5 12.5-12.5 32.76 0 45.25 12.49 12.5 32.76 12.5 45.25 0 12.5-12.5 12.5-32.76 0-45.25-12.5-12.49-32.76-12.49-45.25 0zM248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm126.14 148.05L308.17 300.4a31.938 31.938 0 0 1-15.77 15.77l-144.34 65.97c-16.65 7.61-33.81-9.55-26.2-26.2l65.98-144.35a31.938 31.938 0 0 1 15.77-15.77l144.34-65.97c16.65-7.6 33.8 9.55 26.19 26.2z"/></svg>
      </a>
      <a href="pfmobile.html" class="active-bar">
        <img src="./src/icon/default.jpg" alt="Perfil" class="profile-mini" id="nav-pic">
      </a>
    </div>
  </nav>

<!-- Iframe invisível -->
<!-- Player YouTube invisível -->
</body>

<script>
// Atualiza o nomeTopo com o displayname do usuário visitado
function atualizarNomeTopo(displayname) {
  var nomeTopo = document.getElementById('nomeTopo');
  if (nomeTopo) nomeTopo.textContent = displayname || '';
}

// Hook para atualizar ao carregar perfil
document.addEventListener('DOMContentLoaded', function() {
  // Tenta pegar o nome do usuário já carregado
  var nome = '';
  var nomeEl = document.getElementById('displayname');
  if (nomeEl) nome = nomeEl.textContent;
  atualizarNomeTopo(nome);

  // Se o nome mudar depois (por JS), observe e atualize
  var observer = new MutationObserver(function() {
    var nome = nomeEl ? nomeEl.textContent : '';
    atualizarNomeTopo(nome);
  });
  if (nomeEl) observer.observe(nomeEl, { childList: true, subtree: true });
});


// --- FEED GRID 3xN PREVIEW ---
// Substitui renderização dos posts para grid de previews
function renderFeedGrid(posts) {
  const mural = document.getElementById('muralPosts');
  mural.innerHTML = '';
  posts.forEach(post => {
    const preview = document.createElement('div');
    preview.className = 'post-preview';
    if (post.img) {
      // Imagem: mostra imagem com cover
      const img = document.createElement('img');
      img.src = post.img;
      img.className = 'post-preview-img';
      preview.appendChild(img);
    } else {
      // Só texto: fundo blur + texto
      const blurBg = document.createElement('div');
      blurBg.className = 'post-preview-blur';
      blurBg.style.background = 'linear-gradient(135deg, #222, #444)';
      preview.appendChild(blurBg);
      const text = document.createElement('div');
      text.className = 'post-preview-text';
      text.textContent = post.content ? post.content.slice(0, 60) + (post.content.length > 60 ? '...' : '') : 'Post sem conteúdo';
      preview.appendChild(text);
    }
    preview.onclick = function() {
      abrirModalPost(post);
    };
    mural.appendChild(preview);
  });
}

// Modal do post
function abrirModalPost(post) {
  const modal = document.createElement('div');
  modal.className = 'image-modal';
  modal.innerHTML = `
    <div class="modal-overlay" onclick="this.parentNode.remove()">
      <div class="modal-content" onclick="event.stopPropagation()">
        <button class="modal-close" onclick="this.closest('.image-modal').remove()">
          <i class="fas fa-times"></i>
        </button>
        ${post.img ? `<img src="${post.img}" alt="Imagem do post" class="modal-image">` : ''}
        <div style="padding:16px;color:#f8f9f9;font-size:1.2rem;">${post.content || ''}</div>
      </div>
    </div>
  `;
  document.body.appendChild(modal);
  document.body.style.overflow = 'hidden';
}

// Exemplo de uso: substitua por sua lógica de carregar posts
// window.renderFeedGrid = renderFeedGrid;
// renderFeedGrid([
//   {img:'https://i.pinimg.com/736x/e0/9d/e3/e09de3e9b5b86626129080c9e728a206.jpg', content:'Post com imagem'},
//   {content:'Post só texto, preview com blur'},
//   {img:'https://i.pinimg.com/736x/e0/9d/e3/e09de3e9b5b86626129080c9e728a206.jpg', content:'Outro post com imagem'},
//   {content:'Mais texto para testar o grid'},
// ]);
</script>
<script>
// Função global para mudar a cor do perfil dinamicamente
window.setProfileColor = function(color) {
  document.documentElement.style.setProperty('--profile-color', color);
}
</script>

<script>
// FADE IN ao entrar
document.addEventListener("DOMContentLoaded", () => {
    document.body.classList.add("fade-in");
});

// FADE OUT ao clicar num link interno
document.querySelectorAll("a").forEach(link => {
    link.addEventListener("click", e => {

        // só para links do mesmo site
        const sameSite = link.hostname === location.hostname;

        if (sameSite) {
            e.preventDefault();

            document.body.classList.remove("fade-in");
            document.body.classList.add("fade-out");

            setTimeout(() => {
                window.location.href = link.href;
            }, 400); // igual ao tempo do CSS!
        }
    });
});







document.addEventListener("DOMContentLoaded", () => {
  const startBtn = document.getElementById('start');
  const playerIframe = document.querySelector('#musicPlayer iframe');

  if (startBtn && playerIframe) {
    startBtn.addEventListener('click', () => {
      // No iPhone, a reprodução DEVE ser disparada por um evento de clique
      // Esta técnica tenta forçar o play enviando o parâmetro de autoplay na URL
      let currentSrc = playerIframe.src;
      
      if (currentSrc.includes('?')) {
        playerIframe.src = currentSrc + "&autoplay=1";
      } else {
        playerIframe.src = currentSrc + "?autoplay=1";
      }

      // Feedback visual opcional
      startBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Carregando...';
      setTimeout(() => {
          startBtn.style.display = 'none'; // Esconde o botão após dar o play
      }, 1000);
    });
  }
});






function carregarFotoPerfil() {
  const navPic = document.getElementById('nav-pic');
  const defaultPic = './src/icon/default.jpg';

  // --- PASSO 1: CARREGAMENTO IMEDIATO (CACHE) ---
  // Tenta pegar a URL que salvamos na última vez que ele entrou
  const cachedPhoto = localStorage.getItem('user_photo_cache');
  if (cachedPhoto) {
    navPic.src = cachedPhoto;
  }

  // --- PASSO 2: VALIDAÇÃO EM SEGUNDO PLANO ---
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      const userId = user.uid;
      try {
        const userMediaRef = doc(db, `users/${userId}/user-infos/user-media`);
        const userMediaSnap = await getDoc(userMediaRef);

        if (userMediaSnap.exists()) {
          const userPhoto = userMediaSnap.data().userphoto || defaultPic;

          // Se a foto do banco for diferente da foto que está no cache agora
          if (userPhoto !== cachedPhoto) {
            navPic.src = userPhoto; // Atualiza a imagem na tela
            localStorage.setItem('user_photo_cache', userPhoto); // Atualiza o cache para a próxima vez
          }
        } else {
          navPic.src = defaultPic;
          localStorage.removeItem('user_photo_cache');
        }
      } catch (error) {
        console.error('Erro ao buscar foto:', error);
        if (!cachedPhoto) navPic.src = defaultPic;
      }
    } else {
      // Se não está logado, limpa o cache e volta pra padrão
      navPic.src = defaultPic;
      localStorage.removeItem('user_photo_cache');
    }
  });
}

document.addEventListener('DOMContentLoaded', carregarFotoPerfil);

</script>

  <script type="module" src="codigo-mobile.js"></script>
  <script type="module" src="./src/js/global-messages.js"></script>
</html>