<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>iFriendMatch</title>
  <link rel="icon" href="./src/icon/icon.png" type="image/png" />
  <meta name="theme-color" content="#1F1F1F" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="./src/icon/icon.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="./src/styles/base.css" />
  <link rel="stylesheet" href="./src/styles/layout.css" />
  <link rel="stylesheet" href="./src/styles/components.css" />
  <link rel="stylesheet" href="./src/styles/media-queries.css" />
  <link rel="stylesheet" href="./src/styles/navbars.css" />
    <link rel="stylesheet" href="./src/styles/profile.css" />
</head>
<body>
 <div class="glass-overlay"></div>

  <!-- Navbar -->
  <nav>
    <div class="logo_area">
      <div class="logo">RealMe</div>
    </div>
<div class="search-area">
  <div class="search-box">
    <button><i class="fas fa-search"></i></button>
    <input type="text" id="searchInput" placeholder="Buscar" autocomplete="off"  />
  </div>
</div>

    <div class="last-update-area">
      <div class="last-update">
        <p>Novidades!</p>
      </div>
    </div>
    <div class="marquee-container">
      <div class="marquee">Blessed_ranixw acabou de entrar no RealMe!</div>
    </div>
  </nav>

  <!-- Sidebar Desktop -->
  <aside class="sidebar">
    <a href="iFeed.html"><i class="fas fa-home"></i> In√≠cio</a>
    <a href="#"><i class="fas fa-user-friends"></i> Achar Amigos</a>
    <a href="#"><i class="fas fa-comments"></i> Mensagens</a>
    <a href="#"><i class="fas fa-bell"></i> Notifica√ß√µes</a>
    <a href="#" onclick="openPostOverlay()"><i class="fas fa-plus-square"></i> Criar</a>
    <a href="#" id="linkPerfilSidebar"><i class="fas fa-user"></i> Perfil</a>
    <a href="#"><i class="fas fa-cog"></i> Configura√ß√µes</a>
  </aside>

  <!-- Navbar Bottom (Mobile) -->
  <div class="navbar-bottom">
    <div class="navbar-bottom-content">
      <a href="iFeed.html"><i class="fas fa-home"></i></a>
      <a href="#"><i class="fas fa-search"></i></a>
      <a href="#"><i class="fas fa-user-friends"></i></a>
      <a href="#"><i class="fas fa-comments"></i></a>
      <a href="#"><i class="fas fa-plus-square"></i></a>
      <a href="PF.html" id="linkPerfilMobile"><i class="fas fa-user"></i></a>
      <a href="#"><i class="fas fa-bars"></i></a>
    </div>
  </div>

  <ul id="searchResults"></ul>

<div class="full-profile-container">

  <!-- Topo do perfil -->
  <div class="profile-header">
    <div class="profile-pic-block">
      <img src="./src/icon/default.jpg" alt="Foto de perfil" class="profile-pic" />
    </div>
    
    <div class="profile-info-block">
      <div class="name-line">
        <h2 class="profile-name" id="nomeCompleto">usuario do RealMe</h2>
      </div>
      <div class="handle" id="username">@username</div>

      <div class="profile-stats">
        <span><strong>0</strong> posts</span>
        <span><strong>0</strong> seguidores</span>
        <span><strong>0</strong> amigos</span>
        <span><strong>0</strong> seguindo</span>
      </div>

      <div class="action-buttons">
        <button class="btn-follow">seguir</button>
        <button class="btn-message">mensagem</button>
        <button class="btn-nudge">nudge</button>
      </div>
    </div>
  </div>

  <!-- Corpo do perfil -->
  <div class="profile-body">
    <!-- Sidebar -->
    <div class="profile-menu">
      <button class="menu-item active">mural</button> <!-- Ativo por padr√£o -->
      <button class="menu-item">vis√£o geral</button>
      <button class="menu-item">gostos</button>
      <button class="menu-item">depoimentos</button>
      <button class="menu-item">links</button>
    </div>

    <!-- Conte√∫do din√¢mico -->
    <div class="tab mural-tab active">
                <h3>Mural desse usuario</h3>
      <div class="status-box">
        <p><strong>Este Usuario est√°:</strong></p>
        <p class="status-text">Online</p>
      </div>

      <div class="post-grid">
        <div class="post-card">
          <div class="post-header">
            <div class="profile-post-info">
              <img src="./src/icon/default.jpg" alt="Foto de perfil" class="user-pic">
              <span class="username">Seu Usuario</span>
           </div>
           <i class="fas fa-ellipsis-h dots"></i>
          </div>
          <div class="post-content">
            <p>Este √© um post de testes dos devs do realme</p>
            <!-- <img src="imagem.jpg" alt="Postagem" class="post-image"> -->
          </div>
          <div class="post-footer">
          <div class="post-actions">
            <button><i class="fas fa-heart"></i></button>
            <button><i class="fas fa-bookmark"></i></button>
          </div>
          <span class="post-date">23 de julho de 2025</span>
        </div>
      </div>

        <div class="post-card">
          <div class="post-header">
            <div class="profile-post-info">
              <img src="./src/icon/default.jpg" alt="Foto de perfil" class="user-pic">
              <span class="username">Seu Usuario</span>
           </div>
           <i class="fas fa-ellipsis-h dots"></i>
          </div>
          <div class="post-content">
            <p>Este √© um post de testes dos devs do realme</p>
            <!-- <img src="imagem.jpg" alt="Postagem" class="post-image"> -->
          </div>
          <div class="post-footer">
          <div class="post-actions">
            <button><i class="fas fa-heart"></i></button>
            <button><i class="fas fa-bookmark"></i></button>
          </div>
          <span class="post-date">23 de julho de 2025</span>
        </div>
      </div>

              <div class="post-card">
          <div class="post-header">
            <div class="profile-post-info">
              <img src="./src/icon/default.jpg" alt="Foto de perfil" class="user-pic">
              <span class="username">Seu Usuario</span>
           </div>
           <i class="fas fa-ellipsis-h dots"></i>
          </div>
          <div class="post-content">
            <p>Este √© um post de testes dos devs do realme</p>
            <!-- <img src="./src/posts/post1.png" alt="Postagem" class="post-image"> !-->
          </div>
          <div class="post-footer">
          <div class="post-actions">
            <button><i class="fas fa-heart"></i></button>
            <button><i class="fas fa-bookmark"></i></button>
          </div>
          <span class="post-date">23 de julho de 2025</span>
        </div>
      </div>

      </div>
    </div>
    <div class="tab visao-tab">
      <h3 id="visao-geral-title">Vis√£o Geral desse usuario</h3>
      <div class="about-container">
        <div class="about-box">
          <p><i>Vis√£o geral:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
        <div class="about-box">
          <p><i>Sobre mim:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
        <div class="about-box">
          <p><i>Meu Estilo:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
        <div class="about-box">
          <p><i>Minha personalidade:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
        <div class="about-box">
          <p><i>Meus Sonhos e desejos:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
        <div class="about-box">
          <p><i>Meus Medos:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
      </div>
    </div>
    <div class="tab gostos-tab">
      <h3>Gostos desse usuario</h3>
       <div class="about-container">
        <div class="about-box">
          <p><i>Musicas:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
        <div class="about-box">
          <p><i>Filmes e Series</i>:</p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
        <div class="about-box">
          <p><i>Livros:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
        <div class="about-box">
          <p><i>Personagens:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
        <div class="about-box">
          <p><i>Comidas e Bebidas:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
        <div class="about-box">
          <p><i>Hobbies:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
        <div class="about-box">
          <p><i>Jogos favoritos:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
        <div class="about-box">
          <p><i>Outros gostos:</i></p>
          <p>esta op√ß√£o nao esta dispon√≠vel no momento...</p>
        </div>
      </div>
    </div>
    <div class="tab deps-tab">
      <h3>Depoimentos desse usuario</h3>
             <div class="about-container">
        <div class="about-box">
          <h2>esta op√ß√£o nao esta dispon√≠vel no momento...</h2>
        </div>
      </div>
    </div>
    <div class="tab links-tab">
      <h3>Links  desse usuario</h3>
      <div class="about-container">
        <div class="link-box">
          <a href="#">Nenhum Link Disponivel</a>
        </div>
      </div>
    </div>
  </div>
</div>
  <script src="./src/js/profile.js" defer></script>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import {
    getFirestore,
    collection,
    query,
    orderBy,
    startAt,
    endAt,
    getDocs,
    doc,
    getDoc
  } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB2N41DiH0-Wjdos19dizlWSKOlkpPuOWs",
    authDomain: "ifriendmatch.firebaseapp.com",
    projectId: "ifriendmatch",
    storageBucket: "ifriendmatch.appspot.com",
    messagingSenderId: "306331636603",
    appId: "1:306331636603:web:c0ae0bd22501803995e3de",
    measurementId: "G-D96BEW6RC3"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const searchInput = document.getElementById('searchInput');
  const resultsList = document.getElementById('searchResults');
  const searchButton = document.querySelector('.search-box button');

  async function performSearch() {
    const term = searchInput.value.trim().toLowerCase();
    resultsList.innerHTML = '';
    resultsList.classList.remove('visible');

    if (!term) return;

    const usersRef = collection(db, 'users');
    const q = query(usersRef, orderBy('username'), startAt(term), endAt(term + '\uf8ff'));

    try {
      const snapshot = await getDocs(q);

      if (snapshot.empty) {
        resultsList.innerHTML = '<li>Nenhum usu√°rio encontrado</li>';
        resultsList.classList.add('visible');
        return;
      }

      snapshot.forEach(doc => {
        const user = doc.data();
        const li = document.createElement('li');
        li.textContent = user.username;
        li.addEventListener('click', () => {
          window.location.href = `PF.html?username=${user.username}`;
        });
        resultsList.appendChild(li);
      });

      resultsList.classList.add('visible');
    } catch (err) {
      console.error('Erro na busca:', err);
      resultsList.innerHTML = '<li>Erro na busca</li>';
      resultsList.classList.add('visible');
    }
  }

  searchButton.addEventListener('click', (e) => {
    e.preventDefault();
    performSearch();
  });

  searchInput.addEventListener('input', performSearch);

  document.addEventListener('click', (e) => {
    if (!e.target.closest('.search-area')) {
      resultsList.classList.remove('visible');
    }
  });

  // üîç Carregar dados do perfil
  const params = new URLSearchParams(window.location.search);
  const usernameParam = params.get("username");

  async function carregarPerfil() {
    if (!usernameParam) return;

    const userRef = doc(db, "users", usernameParam);
    const docSnap = await getDoc(userRef);

    if (docSnap.exists()) {
      const dados = docSnap.data();
      const nomeCompleto = `${dados.nome || ''} ${dados.sobrenome || ''}`.trim();
      document.getElementById("nomeCompleto").textContent = nomeCompleto || "Nome n√£o dispon√≠vel";
      document.getElementById("username").textContent = `@${dados.username || usernameParam}`;
    } else {
      document.getElementById("nomeCompleto").textContent = "Usu√°rio n√£o encontrado";
      document.getElementById("username").textContent = "";
    }
  }

  carregarPerfil();

// ...seu c√≥digo atual...

async function atualizarMarqueeUltimoUsuario() {
  try {
    const lastUpdateRef = doc(db, "lastupdate", "latestUser");
    const docSnap = await getDoc(lastUpdateRef);

    const marquee = document.querySelector(".marquee");
    if (!marquee) return;

    if (docSnap.exists()) {
      const data = docSnap.data();
      // Aqui username √© s√≥ uma string com o nome do usu√°rio
      const nomeUsuario = data.username || "Usu√°rio";
      marquee.textContent = `${nomeUsuario} acabou de entrar no RealMe!`;
    } else {
      marquee.textContent = "Nenhum usu√°rio encontrado.";
    }
  } catch (error) {
    console.error("Erro ao buscar √∫ltimo usu√°rio:", error);
    const marquee = document.querySelector(".marquee");
    if (marquee) marquee.textContent = "Erro ao carregar dados.";
  }
}

window.addEventListener("DOMContentLoaded", () => {
  atualizarMarqueeUltimoUsuario();
});


</script>


</body>
</html>