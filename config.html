<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RealMe</title>
  <link rel="icon" href="./src/icon/icon.png" type="image/png" />
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#1F1F1F" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="./src/icon/icon.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="./src/styles/base.css" />
  <link rel="stylesheet" href="./src/styles/root.css" />
  <link rel="stylesheet" href="./src/styles/config-layout.css" />
  <link rel="stylesheet" href="./src/styles/config-components.css" />
  <link rel="stylesheet" href="./src/styles/media-queries.css" />
  <link rel="stylesheet" href="./src/styles/navbars.css" />
  <link rel="stylesheet" href="./src/styles/search.css" />
  <link rel="stylesheet" href="./src/styles/config-mobile.css" />

  <meta property="og:title" content="RealMe">
  <meta property="og:description" content="Entre no RealMe ainda hoje e seja voc√™ mesmo!">
  <meta property="og:url" content="https://maxgfortes.github.io/realme/PF.html">
  <meta property="og:image" content="https://maxgfortes.github.io/realme/src/icon/share_icon.png">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="https://i.postimg.cc/7PfNb8TT/share-icon.png">
  
</head>
<body>

  <div class="glass-overlay"></div>
  

  <!-- Navbar -->
  <nav>
    <div class="logo_area">
      <div class="logo">RealMe</div>
    </div>
    <div class="search-area">
      <div class="search-box">
        <button><i class="fas fa-search"></i></button>
        <input type="text" id="searchInput" placeholder="Buscar" autocomplete="off" />
      </div>
    </div>
    <div class="last-update-area">
      <div class="last-update">
        <p>Novidades!</p>
      </div>
    </div>
    <div class="marquee-container">
      <div class="marquee">marcio_marques acabou de postar uma foto...</div>
    </div>
  </nav>

  <!-- Sidebar Desktop -->
  <aside class="sidebar">
    <a href="feed.html"><i class="fas fa-home"></i> In√≠cio</a>
    <a href="acharamigos.html"><i class="fas fa-user-friends"></i> Achar Amigos</a>
    <a href="direct.html"><i class="fas fa-comments"></i> Mensagens</a>
    <a href="nt.html"><i class="fas fa-bell"></i> Notifica√ß√µes</a>
    <a href="feed.html"><i class="fas fa-plus-square"></i> Criar</a>
    <a href="#" id="linkPerfilSidebar"><i class="fas fa-user"></i> Perfil</a>
    <div class="more-menu" id="moreMenu">
      <a href="#" class="more-toggle" id="moreToggle">
        <i class="fa-solid fa-bars"></i>
        Mais
      </a>
      <div class="floating-menu" id="floatingMenu">
        <a href="config.html"><i class="fas fa-cog"></i> Configura√ß√µes</a>
        <a href="#"><i class="fa-solid fa-user-plus"></i> Convites</a>
        <a href="como-usar.html"><i class="fa-solid fa-book-open"></i> Como Usar</a>
        <a href="sobre.html"><i class="fas fa-question-circle"></i> Sobre</a>
        <a href="#" id="btnSair"><i class="fas fa-sign-out-alt"></i> Sair</a>
      </div>
    </div>
  </aside>

  <ul id="searchResults"></ul>

  <section class="config-box-layout">
    <div class="form-container">
      <div class="header">
        <button onclick="window.history.back()">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 298 511.93">
  <path d="M285.77 441c16.24 16.17 16.32 42.46.15 58.7-16.16 16.24-42.45 16.32-58.69.16l-215-214.47c-16.24-16.16-16.32-42.45-.15-58.69L227.23 12.08c16.24-16.17 42.53-16.09 58.69.15 16.17 16.24 16.09 42.54-.15 58.7l-185.5 185.04L285.77 441z"/>
</svg>
      </button>
        <h2>Configura√ß√µes do Perfil</h2>
      </div>

      <!-- Tabs -->
      <div class="config-tabs">
        <button class="tab-button active" data-tab="perfil">
          <i class="fas fa-user"></i> Perfil
        </button>
        <button class="tab-button" data-tab="preferencias">
          <i class="fas fa-heart"></i> Prefer√™ncias
        </button>
        <button class="tab-button conta" data-tab="conta">
          <i class="fas fa-shield-alt"></i> Conta
        </button>
      </div>

      <form>
<!-- Tab: Perfil -->
<div class="tab-content active" id="perfil">
  <div class="form-section">
    <div class="section-header">
      <i class="fas fa-id-card"></i>
      <h3>Informa√ß√µes B√°sicas</h3>
    </div>
    <div class="form-grid two-column">
      <div class="form-group">
        <label>Nome de Usu√°rio:</label>
        <input type="text" name="username" minlength="3" required maxlength="100">
      </div>
      <div class="form-group">
        <label>Nome vis√≠vel:</label>
        <input type="text" name="displayname">
      </div>
      <div class="form-group">
        <label>Pronome 1:</label>
        <input type="text" maxlength="5" name="pronoun1">
      </div>
      <div class="form-group">
        <label>Pronome 2:</label>
        <input type="text" maxlength="5" name="pronoun2">
      </div>
      <div class="form-group">
        <label>Estado Civil:</label>
        <select name="maritalStatus">
          <option value="">Selecione...</option>
          <option value="solteiro">Solteiro(a)</option>
          <option value="namorando">Namorando</option>
          <option value="casado">Casado(a)</option>
          <option value="divorciado">Divorciado(a)</option>
          <option value="viuvo">Vi√∫vo(a)</option>
          <option value="em compromisso">em Compromisso</option>
        </select>
      </div>
      <div class="form-group">
        <label>Localiza√ß√£o:</label>
        <input type="text" name="location" maxlength="100">
        <div class="char-counter">0/100</div>
      </div>
    </div>
  </div>

  <div class="form-section">
    <div class="section-header">
      <i class="fas fa-image"></i>
      <h3>Imagens do Perfil</h3>
    </div>
    <div class="form-grid two-column">
      <div class="form-group">
        <label>Foto de perfil:</label>
        <input type="file" data-image-field="userphoto" accept="image/*">
        <span class="upload-status"></span>
        <input type="hidden" name="userphoto">
      </div>
      <div class="form-group">
        <label>Imagem de Banner:</label>
        <input type="file" data-image-field="headerphoto" accept="image/*">
        <span class="upload-status"></span>
        <input type="hidden" name="headerphoto">
      </div>
      <div class="form-group">
        <label>Background:</label>
        <input type="file" data-image-field="background" accept="image/*">
        <span class="upload-status"></span>
        <input type="hidden" name="background">
      </div>
      <div class="form-group" style="display: none;">
        <label>Fonte do Perfil</label>
          <input type="text" name="customFont" placeholder="Ex: Poppins, Inter, URL, etc">
      </div>
    </div>
  </div>

  <div class="form-section">
    <div class="section-header">
      <i class="fas fa-music"></i>
      <h3>M√∫sica do Perfil</h3>
    </div>
    <div class="form-grid two-column">
      <div class="form-group">
        <label>URL da m√∫sica do perfil (YouTube):</label>
        <input type="text" name="musicTheme" maxlength="500" placeholder="https://youtube.com/..." />
      </div>
      <div class="form-group">
        <label>T√≠tulo da m√∫sica do perfil:</label>
        <input type="text" name="musicThemeName" maxlength="100" placeholder="Nome da m√∫sica" />
      </div>
    </div>
  </div>
  

  <div class="form-section">
    <div class="section-header">
      <i class="fa-solid fa-palette"></i>
      <h3>Cores de Perfil</h3>
    </div>
    <div class="form-grid two-column">
      <div class="form-group">
        <label>Cor Principal</label>
        <input type="color" class="color-input" name="profileColor" id="colorInput" value="#3498db">
      </div>
      <div class="form-group">
        <label>Cor Secundaria</label>
        <input type="color" class="color-input" name="profileColor2" id="colorInput2" value="#3498db">
      </div>
    </div>
  </div>
</div>

<!-- Tab: Prefer√™ncias -->
<div class="tab-content" id="preferencias">
  <div class="form-section">
    <div class="section-header">
      <i class="fas fa-tags"></i>
      <h3>Descri√ß√£o</h3>
    </div>
    <div class="form-grid">
      <div class="form-group">
        <label>Tags:</label>
        <input type="text" name="tags" maxlength="8">
      </div>
      <div class="form-group">
        <label>Vis√£o Geral:</label>
        <textarea name="overview" maxlength="600"></textarea>
        <div class="char-counter">0/600</div>
      </div>
      <div class="form-group">
        <label>Estilo:</label>
        <textarea name="styles" maxlength="500"></textarea>
        <div class="char-counter">0/500</div>
      </div>
    </div>
  </div>

  <div class="form-section">
    <div class="section-header">
      <i class="fas fa-brain"></i>
      <h3>Personalidade</h3>
    </div>
    <div class="form-grid">
      <div class="form-group">
        <label>Sonhos e desejos:</label>
        <textarea name="dreams" maxlength="500"></textarea>
        <div class="char-counter">0/500</div>
      </div>
      <div class="form-group">
        <label>Medos:</label>
        <textarea name="fears" maxlength="500"></textarea>
        <div class="char-counter">0/500</div>
      </div>
      <div class="form-group">
        <label>Personalidade:</label>
        <textarea name="personality" maxlength="500"></textarea>
        <div class="char-counter">0/500</div>
      </div>
    </div>
  </div>

  <div class="form-section">
    <div class="section-header">
      <i class="fas fa-heart"></i>
      <h3>Gostos</h3>
    </div>
    <div class="form-grid">
      <div class="form-group">
        <label>Livros:</label>
        <textarea name="books" maxlength="500"></textarea>
        <div class="char-counter">0/500</div>
      </div>
      <div class="form-group">
        <label>Personagens:</label>
        <textarea name="characters" maxlength="500"></textarea>
        <div class="char-counter">0/500</div>
      </div>
      <div class="form-group">
        <label>Comidas e Bebidas:</label>
        <textarea name="foods" maxlength="500"></textarea>
        <div class="char-counter">0/500</div>
      </div>
      <div class="form-group">
        <label>Jogos favoritos:</label>
        <textarea name="games" maxlength="500"></textarea>
        <div class="char-counter">0/500</div>
      </div>
      <div class="form-group">
        <label>Hobbies:</label>
        <textarea name="hobbies" maxlength="500"></textarea>
        <div class="char-counter">0/500</div>
      </div>
      <div class="form-group">
        <label>Filmes e S√©ries:</label>
        <textarea name="movies" maxlength="500"></textarea>
        <div class="char-counter">0/500</div>
      </div>
      <div class="form-group">
        <label>M√∫sicas:</label>
        <textarea name="music" maxlength="500"></textarea>
        <div class="char-counter">0/500</div>
      </div>
      <div class="form-group">
        <label>Outros gostos:</label>
        <textarea name="others" maxlength="500"></textarea>
        <div class="char-counter">0/500</div>
      </div>
    </div>
  </div>
</div>

<!-- Tab: Conta -->
<div class="tab-content" id="conta">
  <div class="form-section">
    <div class="section-header">
      <i class="fas fa-bell"></i>
      <h3>Notifica√ß√µes</h3>
    </div>
    <div class="form-grid">
      <div class="form-group">
        <label>Notifica√ß√µes Push</label>
        <p style="font-size: 13px; color: #999; margin-bottom: 12px;">Receba notifica√ß√µes quando algu√©m curte seu post, se registra ou entra no RealMe.</p>
        <button type="button" id="enableNotificationsBtn" class="notification-btn" style="
          background: #4A90E2;
          color: white;
          padding: 10px 20px;
          border: none;
          border-radius: 6px;
          cursor: pointer;
          font-weight: bold;
          transition: all 0.3s;
          width: 100%;
        ">
          üîî Ativar Notifica√ß√µes
        </button>
        <div id="notificationStatus" style="margin-top: 12px; font-size: 13px; color: #999;"></div>
      </div>
    </div>
  </div>

  <div class="form-section">
    <div class="section-header">
      <i class="fas fa-envelope"></i>
      <h3>Informa√ß√µes de Contato</h3>
    </div>
    <div class="form-grid two-column">
      <div class="form-group">
        <label>Email:</label>
        <input type="email" name="email" value="seuemail@exemplo.com">
      </div>
      <div class="form-group">
        <label>N√∫mero de telefone:</label>
        <input type="text" name="telefone" value="(00) 00000-0000">
      </div>
    </div>
  </div>

  <h3>Dispositivos conectados</h3>
<div id="listaSessoes"></div>


  <div class="form-section">
    <div class="section-header">
      <i class="fas fa-lock"></i>
      <h3>Seguran√ßa</h3>
    </div>
    <div class="form-grid two-column">
      <div class="form-group">
        <label>Senha atual:</label>
        <input type="password" name="senhaAtual">
      </div>
      <div class="form-group">
        <label>Nova senha:</label>
        <input type="password" name="novaSenha">
      </div>
    </div>
  </div>
</div>

        <button type="submit" class="submit-btn">Salvar Configura√ß√µes</button>
      </form>
    </div>
    
    <footer>
      <div>
        <a href="sobre.html">Sobre</a>
        <a href="contato.html">Contato</a>
        <a href="privacidade.html">Privacidade</a>
      </div>
      <p>&copy; 2025 RealMe - Criado por Maxgfortes</p>
    </footer>
  </section>
<script type="module" src="./src/js/user-config.js"></script>
<script type="module" src="./src/js/navbar.js"></script>
<script src="./src/js/config.js"></script>
<script type="module">
  // Import Firebase necess√°rio
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
  import { getMessaging, getToken, onMessage } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-messaging.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB2N41DiH0-Wjdos19dizlWSKOlkpPuOWs",
    authDomain: "ifriendmatch.firebaseapp.com",
    projectId: "ifriendmatch",
    storageBucket: "ifriendmatch.appspot.com",
    messagingSenderId: "306331636603",
    appId: "1:306331636603:web:c0ae0bd22501803995e3de",
    measurementId: "G-D96BEW6RC3"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);
  
  const PUBLIC_VAPID_KEY = (typeof window !== 'undefined' && window.PUBLIC_VAPID_KEY) ? window.PUBLIC_VAPID_KEY : 'BMo3jh0D8qPPpaLywdvKZNiJfhi0RGtpvNkzSVsWD5ivJDvdjuvD4eGeRlRkyb59VcUG-PVhT2qSdrRcRO4qivg';
  let messaging;

  const statusDiv = document.getElementById('notificationStatus');
  const btn = document.getElementById('enableNotificationsBtn');

  // Verifica status ao carregar a p√°gina
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      const userRef = doc(db, 'users', user.uid);
      const userSnap = await getDoc(userRef);
      const tokens = userSnap.exists() && Array.isArray(userSnap.data().pushTokens) ? userSnap.data().pushTokens : [];
      
      if (tokens.length > 0) {
        btn.textContent = '‚úÖ Notifica√ß√µes Ativadas';
        btn.disabled = true;
        btn.style.background = '#28a745';
        statusDiv.textContent = `Token salvo (${tokens.length} dispositivo${tokens.length > 1 ? 's' : ''})`;
        statusDiv.style.color = '#28a745';
      } else {
        statusDiv.textContent = 'Clique no bot√£o para ativar notifica√ß√µes';
      }
    }
  });

  btn.addEventListener('click', async () => {
    btn.disabled = true;
    btn.textContent = '‚è≥ Ativando...';
    
    try {
      const user = auth.currentUser;
      if (!user) {
        statusDiv.textContent = '‚ùå Voc√™ precisa estar logado';
        statusDiv.style.color = '#dc3545';
        btn.disabled = false;
        btn.textContent = 'üîî Ativar Notifica√ß√µes';
        return;
      }

      // Verifica suporte
      if (!('Notification' in window)) {
        statusDiv.textContent = '‚ùå Notifica√ß√µes n√£o suportadas neste navegador';
        statusDiv.style.color = '#dc3545';
        btn.disabled = false;
        btn.textContent = 'üîî Ativar Notifica√ß√µes';
        return;
      }

      // Pede permiss√£o
      let permission = Notification.permission;
      if (permission === 'default') {
        permission = await Notification.requestPermission();
        statusDiv.textContent = 'üîî Pedindo permiss√£o...';
      }

      if (permission !== 'granted') {
        statusDiv.textContent = '‚ùå Permiss√£o negada. Verifique as configura√ß√µes do navegador.';
        statusDiv.style.color = '#dc3545';
        btn.disabled = false;
        btn.textContent = 'üîî Ativar Notifica√ß√µes';
        return;
      }

      // Obt√©m token
      if (!messaging) messaging = getMessaging(app);
      const token = await getToken(messaging, { vapidKey: PUBLIC_VAPID_KEY });
      
      if (!token) {
        statusDiv.textContent = '‚ùå Erro ao gerar token. Tente novamente.';
        statusDiv.style.color = '#dc3545';
        btn.disabled = false;
        btn.textContent = 'üîî Ativar Notifica√ß√µes';
        return;
      }

      // Salva no Firestore
      const userRef = doc(db, 'users', user.uid);
      const userSnap = await getDoc(userRef);
      const data = userSnap.exists() ? userSnap.data() : {};
      const tokens = Array.isArray(data.pushTokens) ? data.pushTokens : [];
      
      if (!tokens.includes(token)) {
        tokens.push(token);
        await setDoc(userRef, { pushTokens: tokens }, { merge: true });
      }

      // Escuta mensagens em foreground
      onMessage(messaging, (payload) => {
        if (payload && payload.notification) {
          const title = payload.notification.title || '';
          const body = payload.notification.body || '';
          try {
            new Notification(title, { body });
          } catch (e) {}
        }
      });

      // Sucesso
      btn.textContent = '‚úÖ Notifica√ß√µes Ativadas';
      btn.style.background = '#28a745';
      statusDiv.textContent = `‚úÖ Token salvo com sucesso! Voc√™ receber√° notifica√ß√µes agora.`;
      statusDiv.style.color = '#28a745';
      
    } catch (err) {
      console.error('Erro ao ativar notifica√ß√µes:', err);
      statusDiv.textContent = `‚ùå Erro: ${err.message}`;
      statusDiv.style.color = '#dc3545';
      btn.disabled = false;
      btn.textContent = 'üîî Ativar Notifica√ß√µes';
    }
  });
</script>
  <script>
    // Sistema de tabs
    document.addEventListener("DOMContentLoaded", function() {
      document.querySelectorAll('.tab-button').forEach(button => {
        button.addEventListener('click', () => {
          document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
          button.classList.add('active');
          const tabContent = document.getElementById(button.dataset.tab);
          if (tabContent) {
            tabContent.classList.add('active');
          }
        });
      });
    });
  </script>
</body>
</html>